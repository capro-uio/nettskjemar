<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Enhanced Workflow with Labelled Data • nettskjemar</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png">
<link rel="icon" type="”image/svg+xml”" href="../favicon.svg">
<link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png">
<link rel="icon" sizes="any" href="../favicon.ico">
<link rel="manifest" href="../site.webmanifest">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Enhanced Workflow with Labelled Data">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-dark" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">nettskjemar</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.2.9003</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../articles/nettskjemar.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><h6 class="dropdown-header" data-toc-skip>Working with data</h6></li>
    <li><a class="dropdown-item" href="../articles/nettskjemar.html">Retrieving all form submissions</a></li>
    <li><a class="dropdown-item" href="../articles/labelled_data.html">Labelled data</a></li>
    <li><a class="dropdown-item" href="../articles/submissions.html">Single submissions</a></li>
    <li><a class="dropdown-item" href="../articles/attachments.html">Retrieving attachments</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>User auth and information</h6></li>
    <li><a class="dropdown-item" href="../articles/authentication.html">Authentication setup</a></li>
    <li><a class="dropdown-item" href="../articles/forms.html">Viewing all forms</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Other requests</h6></li>
    <li><a class="dropdown-item" href="../articles/metadata.html">Retrieving form meta-data</a></li>
    <li><a class="dropdown-item" href="../articles/custom_requests.html">Running custom requests</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/capro-uio/nettskjemar/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Enhanced Workflow with Labelled Data</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/capro-uio/nettskjemar/blob/main/vignettes/labelled_data.Rmd" class="external-link"><code>vignettes/labelled_data.Rmd</code></a></small>
      <div class="d-none name"><code>labelled_data.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="introduction-to-using-labelled-data">Introduction to using Labelled data<a class="anchor" aria-label="anchor" href="#introduction-to-using-labelled-data"></a>
</h2>
<p>Labelled data is a type of dataset where variables or their values
contain additional metadata. These datasets, common in tools like SPSS
or Stata, allow for better understanding and documentation of
variables.</p>
<p>The <a href="https://haven.tidyverse.org" class="external-link">haven</a> package in R is specifically designed for
working with such datasets. It enhances metadata handling by allowing
you to embed variable and value labels directly into your data.</p>
<p>In this vignette, we’ll explore how labelled data works, leveraging
key <a href="https://haven.tidyverse.org" class="external-link">haven</a> package functionalities to extract, inspect,
and manipulate labels.</p>
</div>
<div class="section level2">
<h2 id="getting-labelled-data-from-nettskjemar">Getting labelled data from nettskjemar<a class="anchor" aria-label="anchor" href="#getting-labelled-data-from-nettskjemar"></a>
</h2>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/CAPRO-UiO/nettskjemar" class="external-link">nettskjemar</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Replace this with your form ID</span></span>
<span><span class="va">formid</span> <span class="op">&lt;-</span> <span class="fl">123823</span></span>
<span></span>
<span><span class="va">data</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/ns_get_data.html">ns_get_data</a></span><span class="op">(</span><span class="va">formid</span><span class="op">)</span></span>
<span><span class="va">data</span></span>
<span><span class="co">#&gt;   formid $submission_id                  $created       freetext radio</span></span>
<span><span class="co">#&gt; 1 123823       27685292 2023-06-01T20:57:15+02:00      some text     1</span></span>
<span><span class="co">#&gt; 2 123823       27685302 2023-06-01T20:58:33+02:00 another answer    -1</span></span>
<span><span class="co">#&gt; 3 123823       27685319 2023-06-01T20:59:50+02:00                   -1</span></span>
<span><span class="co">#&gt;   checkbox.questionnaires checkbox.events checkbox.logs dropdown</span></span>
<span><span class="co">#&gt; 1                       1               1             0        4</span></span>
<span><span class="co">#&gt; 2                       0               0             1        9</span></span>
<span><span class="co">#&gt; 3                       1               1             1        4</span></span>
<span><span class="co">#&gt;   radio_matrix.grants radio_matrix.lecture radio_matrix.email</span></span>
<span><span class="co">#&gt; 1                   1                    2                  2</span></span>
<span><span class="co">#&gt; 2                   3                    3                  1</span></span>
<span><span class="co">#&gt; 3                   1                    1                  1</span></span>
<span><span class="co">#&gt;   checkbox_matrix.1.IT checkbox_matrix.1.colleague checkbox_matrix.1.admin</span></span>
<span><span class="co">#&gt; 1                    1                           1                       0</span></span>
<span><span class="co">#&gt; 2                    0                           0                       0</span></span>
<span><span class="co">#&gt; 3                    0                           1                       0</span></span>
<span><span class="co">#&gt;   checkbox_matrix.1.union checkbox_matrix.1.internet checkbox_matrix.2.IT</span></span>
<span><span class="co">#&gt; 1                       0                          0                    0</span></span>
<span><span class="co">#&gt; 2                       0                          1                    0</span></span>
<span><span class="co">#&gt; 3                       0                          1                    1</span></span>
<span><span class="co">#&gt;   checkbox_matrix.2.colleague checkbox_matrix.2.admin checkbox_matrix.2.union</span></span>
<span><span class="co">#&gt; 1                           0                       1                       0</span></span>
<span><span class="co">#&gt; 2                           0                       1                       1</span></span>
<span><span class="co">#&gt; 3                           1                       1                       1</span></span>
<span><span class="co">#&gt;   checkbox_matrix.2.internet       date  time         datetime number_decimal</span></span>
<span><span class="co">#&gt; 1                          0 2023-06-01 12:00 2023-06-12T13:33            4.5</span></span>
<span><span class="co">#&gt; 2                          0 2023-02-07 14:45 2024-02-15T08:55            2.2</span></span>
<span><span class="co">#&gt; 3                          0 2022-09-28 05:11 2022-03-03T07:29           10.0</span></span>
<span><span class="co">#&gt;   number_integer slider attachment_1 attachment_2 $answer_time_ms</span></span>
<span><span class="co">#&gt; 1           77.0      3    sølvi.png                        74630</span></span>
<span><span class="co">#&gt; 2           45.0      1               marius.jpeg           71313</span></span>
<span><span class="co">#&gt; 3           98.0      9                                     70230</span></span></code></pre></div>
<p>Here we have our example data, displayed as a standard data.frame.
There is nothing particularly special about it. To continue, we also
need to download the form codebook, as we need this to add the
labels.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cb</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/ns_get_codebook.html">ns_get_codebook</a></span><span class="op">(</span><span class="va">formid</span><span class="op">)</span></span>
<span><span class="va">cb</span></span>
<span><span class="co">#&gt;    element_no    element_type                element_code</span></span>
<span><span class="co">#&gt; 1           1         HEADING                        &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 2           2            TEXT                        &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 3           3           IMAGE                        &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 4           4      PAGE_BREAK                        &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 5           5        QUESTION                    freetext</span></span>
<span><span class="co">#&gt; 6           6           RADIO                       radio</span></span>
<span><span class="co">#&gt; 7           6           RADIO                       radio</span></span>
<span><span class="co">#&gt; 8           7        CHECKBOX     checkbox.questionnaires</span></span>
<span><span class="co">#&gt; 9           7        CHECKBOX             checkbox.events</span></span>
<span><span class="co">#&gt; 10          7        CHECKBOX               checkbox.logs</span></span>
<span><span class="co">#&gt; 11          8          SELECT                    dropdown</span></span>
<span><span class="co">#&gt; 12          8          SELECT                    dropdown</span></span>
<span><span class="co">#&gt; 13          9    MATRIX_RADIO         radio_matrix.grants</span></span>
<span><span class="co">#&gt; 14          9    MATRIX_RADIO         radio_matrix.grants</span></span>
<span><span class="co">#&gt; 15          9    MATRIX_RADIO         radio_matrix.grants</span></span>
<span><span class="co">#&gt; 16          9    MATRIX_RADIO        radio_matrix.lecture</span></span>
<span><span class="co">#&gt; 17          9    MATRIX_RADIO        radio_matrix.lecture</span></span>
<span><span class="co">#&gt; 18          9    MATRIX_RADIO        radio_matrix.lecture</span></span>
<span><span class="co">#&gt; 19          9    MATRIX_RADIO          radio_matrix.email</span></span>
<span><span class="co">#&gt; 20          9    MATRIX_RADIO          radio_matrix.email</span></span>
<span><span class="co">#&gt; 21          9    MATRIX_RADIO          radio_matrix.email</span></span>
<span><span class="co">#&gt; 22         10 MATRIX_CHECKBOX        checkbox_matrix.1.IT</span></span>
<span><span class="co">#&gt; 23         10 MATRIX_CHECKBOX checkbox_matrix.1.colleague</span></span>
<span><span class="co">#&gt; 24         10 MATRIX_CHECKBOX     checkbox_matrix.1.admin</span></span>
<span><span class="co">#&gt; 25         10 MATRIX_CHECKBOX     checkbox_matrix.1.union</span></span>
<span><span class="co">#&gt; 26         10 MATRIX_CHECKBOX  checkbox_matrix.1.internet</span></span>
<span><span class="co">#&gt; 27         10 MATRIX_CHECKBOX        checkbox_matrix.2.IT</span></span>
<span><span class="co">#&gt; 28         10 MATRIX_CHECKBOX checkbox_matrix.2.colleague</span></span>
<span><span class="co">#&gt; 29         10 MATRIX_CHECKBOX     checkbox_matrix.2.admin</span></span>
<span><span class="co">#&gt; 30         10 MATRIX_CHECKBOX     checkbox_matrix.2.union</span></span>
<span><span class="co">#&gt; 31         10 MATRIX_CHECKBOX  checkbox_matrix.2.internet</span></span>
<span><span class="co">#&gt; 32         11            DATE                        date</span></span>
<span><span class="co">#&gt; 33         12            DATE                        time</span></span>
<span><span class="co">#&gt; 34         13            DATE                    datetime</span></span>
<span><span class="co">#&gt; 35         14          NUMBER              number_decimal</span></span>
<span><span class="co">#&gt; 36         15          NUMBER              number_integer</span></span>
<span><span class="co">#&gt; 37         16    LINEAR_SCALE                      slider</span></span>
<span><span class="co">#&gt; 38         17      ATTACHMENT                attachment_1</span></span>
<span><span class="co">#&gt; 39         18      ATTACHMENT                attachment_2</span></span>
<span><span class="co">#&gt;                                                                               element_text</span></span>
<span><span class="co">#&gt; 1                                         Let talk about Nettskjema! This is a subheading!</span></span>
<span><span class="co">#&gt; 2                                                                                     &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 3                                                                                     &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 4                                                                                     &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 5  This is a question about something super important, where the user can input free text.</span></span>
<span><span class="co">#&gt; 6                                                        How happy are we with Nettskjema?</span></span>
<span><span class="co">#&gt; 7                                                        How happy are we with Nettskjema?</span></span>
<span><span class="co">#&gt; 8                                                  What do we use it for?:: Questionnaires</span></span>
<span><span class="co">#&gt; 9                                                  What do we use it for?:: Event sign-ups</span></span>
<span><span class="co">#&gt; 10                                                   What do we use it for?:: Data logging</span></span>
<span><span class="co">#&gt; 11                                                     Who is responsible with Nettskjema?</span></span>
<span><span class="co">#&gt; 12                                                     Who is responsible with Nettskjema?</span></span>
<span><span class="co">#&gt; 13                               In the last month I have: written some grant applications</span></span>
<span><span class="co">#&gt; 14                               In the last month I have: written some grant applications</span></span>
<span><span class="co">#&gt; 15                               In the last month I have: written some grant applications</span></span>
<span><span class="co">#&gt; 16                                                In the last month I have: held a lecture</span></span>
<span><span class="co">#&gt; 17                                                In the last month I have: held a lecture</span></span>
<span><span class="co">#&gt; 18                                                In the last month I have: held a lecture</span></span>
<span><span class="co">#&gt; 19                                             In the last month I have: sent some e-mails</span></span>
<span><span class="co">#&gt; 20                                             In the last month I have: sent some e-mails</span></span>
<span><span class="co">#&gt; 21                                             In the last month I have: sent some e-mails</span></span>
<span><span class="co">#&gt; 22                                      In the last year, I have :: sought help from :: IT</span></span>
<span><span class="co">#&gt; 23                             In the last year, I have :: sought help from :: A colleague</span></span>
<span><span class="co">#&gt; 24                          In the last year, I have :: sought help from :: Administration</span></span>
<span><span class="co">#&gt; 25                                   In the last year, I have :: sought help from :: Union</span></span>
<span><span class="co">#&gt; 26                                In the last year, I have :: sought help from :: Internet</span></span>
<span><span class="co">#&gt; 27                                 In the last year, I have :: received e-mails from :: IT</span></span>
<span><span class="co">#&gt; 28                        In the last year, I have :: received e-mails from :: A colleague</span></span>
<span><span class="co">#&gt; 29                     In the last year, I have :: received e-mails from :: Administration</span></span>
<span><span class="co">#&gt; 30                              In the last year, I have :: received e-mails from :: Union</span></span>
<span><span class="co">#&gt; 31                           In the last year, I have :: received e-mails from :: Internet</span></span>
<span><span class="co">#&gt; 32                                                                    Choose a random date</span></span>
<span><span class="co">#&gt; 33                                                               now choose a random time!</span></span>
<span><span class="co">#&gt; 34                                                          Lastly choose a date AND time!</span></span>
<span><span class="co">#&gt; 35                                                         Pick a number between 0 and 10!</span></span>
<span><span class="co">#&gt; 36                                                     Choose an integer between 0 and 100</span></span>
<span><span class="co">#&gt; 37                                                           Choose a point on the slider!</span></span>
<span><span class="co">#&gt; 38                                                                     Upload a fun image!</span></span>
<span><span class="co">#&gt; 39                                                                  This is an attachment2</span></span>
<span><span class="co">#&gt;                                                                                  element_desc</span></span>
<span><span class="co">#&gt; 1                                                                                        &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 2  &lt;p&gt;This is some text in the form, not a question but a descriptive text.&lt;/p&gt;\n\n&lt;p&gt; &lt;/p&gt;\n</span></span>
<span><span class="co">#&gt; 3                                                                                        &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 4                                                                                        &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 5    &lt;p&gt;With a description field giving details on what should be answered.&lt;/p&gt;\n\n&lt;p&gt; &lt;/p&gt;\n</span></span>
<span><span class="co">#&gt; 6                                 &lt;p&gt;This is a question with radio buttons.&lt;/p&gt;\n\n&lt;p&gt; &lt;/p&gt;\n</span></span>
<span><span class="co">#&gt; 7                                 &lt;p&gt;This is a question with radio buttons.&lt;/p&gt;\n\n&lt;p&gt; &lt;/p&gt;\n</span></span>
<span><span class="co">#&gt; 8         &lt;p&gt;This is a checkbox question, where respondents can choose several options.&lt;/p&gt;\n</span></span>
<span><span class="co">#&gt; 9         &lt;p&gt;This is a checkbox question, where respondents can choose several options.&lt;/p&gt;\n</span></span>
<span><span class="co">#&gt; 10        &lt;p&gt;This is a checkbox question, where respondents can choose several options.&lt;/p&gt;\n</span></span>
<span><span class="co">#&gt; 11                                               &lt;p&gt;This is a dropdown list&lt;/p&gt;\n\n&lt;p&gt; &lt;/p&gt;\n</span></span>
<span><span class="co">#&gt; 12                                               &lt;p&gt;This is a dropdown list&lt;/p&gt;\n\n&lt;p&gt; &lt;/p&gt;\n</span></span>
<span><span class="co">#&gt; 13                                                                                       &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 14                                                                                       &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 15                                                                                       &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 16                                                                                       &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 17                                                                                       &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 18                                                                                       &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 19                                                                                       &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 20                                                                                       &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 21                                                                                       &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 22                                                                                       &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 23                                                                                       &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 24                                                                                       &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 25                                                                                       &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 26                                                                                       &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 27                                                                                       &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 28                                                                                       &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 29                                                                                       &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 30                                                                                       &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 31                                                                                       &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 32                                                    &lt;p&gt;Choose whatever date you want!&lt;/p&gt;\n</span></span>
<span><span class="co">#&gt; 33                                                                     &lt;p&gt; &lt;/p&gt;\n\n&lt;p&gt; &lt;/p&gt;\n</span></span>
<span><span class="co">#&gt; 34                                                                     &lt;p&gt; &lt;/p&gt;\n\n&lt;p&gt; &lt;/p&gt;\n</span></span>
<span><span class="co">#&gt; 35                                                       &lt;p&gt;with description&lt;/p&gt;\n\n&lt;p&gt;&lt;/p&gt;\n</span></span>
<span><span class="co">#&gt; 36                                                          &lt;p&gt;as an integer&lt;/p&gt;\n\n&lt;p&gt;&lt;/p&gt;\n</span></span>
<span><span class="co">#&gt; 37                                                                                       &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 38                                                                     &lt;p&gt; &lt;/p&gt;\n\n&lt;p&gt; &lt;/p&gt;\n</span></span>
<span><span class="co">#&gt; 39                                                       &lt;p&gt;with description&lt;/p&gt;\n\n&lt;p&gt;&lt;/p&gt;\n</span></span>
<span><span class="co">#&gt;    subelement_seq    answer_text    answer_code answer_seq</span></span>
<span><span class="co">#&gt; 1              NA           &lt;NA&gt;           &lt;NA&gt;         NA</span></span>
<span><span class="co">#&gt; 2              NA           &lt;NA&gt;           &lt;NA&gt;         NA</span></span>
<span><span class="co">#&gt; 3              NA           &lt;NA&gt;           &lt;NA&gt;         NA</span></span>
<span><span class="co">#&gt; 4              NA           &lt;NA&gt;           &lt;NA&gt;         NA</span></span>
<span><span class="co">#&gt; 5              NA           &lt;NA&gt;           &lt;NA&gt;         NA</span></span>
<span><span class="co">#&gt; 6              NA    Very happy!              1          1</span></span>
<span><span class="co">#&gt; 7              NA  Very unhappy!             -1          2</span></span>
<span><span class="co">#&gt; 8              NA Questionnaires questionnaires          1</span></span>
<span><span class="co">#&gt; 9              NA Event sign-ups         events          2</span></span>
<span><span class="co">#&gt; 10             NA   Data logging           logs          3</span></span>
<span><span class="co">#&gt; 11             NA            UiO              4          1</span></span>
<span><span class="co">#&gt; 12             NA        OsloMet              9          2</span></span>
<span><span class="co">#&gt; 13              1            yes              1          1</span></span>
<span><span class="co">#&gt; 14              1             no              2          2</span></span>
<span><span class="co">#&gt; 15              1 not applicable              3          3</span></span>
<span><span class="co">#&gt; 16              2            yes              1          1</span></span>
<span><span class="co">#&gt; 17              2             no              2          2</span></span>
<span><span class="co">#&gt; 18              2 not applicable              3          3</span></span>
<span><span class="co">#&gt; 19              3            yes              1          1</span></span>
<span><span class="co">#&gt; 20              3             no              2          2</span></span>
<span><span class="co">#&gt; 21              3 not applicable              3          3</span></span>
<span><span class="co">#&gt; 22              1             IT             IT          1</span></span>
<span><span class="co">#&gt; 23              1    A colleague      colleague          2</span></span>
<span><span class="co">#&gt; 24              1 Administration          admin          3</span></span>
<span><span class="co">#&gt; 25              1          Union          union          4</span></span>
<span><span class="co">#&gt; 26              1       Internet       internet          5</span></span>
<span><span class="co">#&gt; 27              2             IT             IT          1</span></span>
<span><span class="co">#&gt; 28              2    A colleague      colleague          2</span></span>
<span><span class="co">#&gt; 29              2 Administration          admin          3</span></span>
<span><span class="co">#&gt; 30              2          Union          union          4</span></span>
<span><span class="co">#&gt; 31              2       Internet       internet          5</span></span>
<span><span class="co">#&gt; 32             NA           &lt;NA&gt;           &lt;NA&gt;         NA</span></span>
<span><span class="co">#&gt; 33             NA           &lt;NA&gt;           &lt;NA&gt;         NA</span></span>
<span><span class="co">#&gt; 34             NA           &lt;NA&gt;           &lt;NA&gt;         NA</span></span>
<span><span class="co">#&gt; 35             NA           &lt;NA&gt;           &lt;NA&gt;         NA</span></span>
<span><span class="co">#&gt; 36             NA           &lt;NA&gt;           &lt;NA&gt;         NA</span></span>
<span><span class="co">#&gt; 37             NA           &lt;NA&gt;           &lt;NA&gt;         NA</span></span>
<span><span class="co">#&gt; 38             NA           &lt;NA&gt;           &lt;NA&gt;         NA</span></span>
<span><span class="co">#&gt; 39             NA           &lt;NA&gt;           &lt;NA&gt;         NA</span></span></code></pre></div>
<p>To add the labels, we use the <code>ns_add_labels</code> function,
using both the unlabelled data and the codebook.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">lab_data</span> <span class="op">&lt;-</span> <span class="va">data</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/ns_add_labels.html">ns_add_labels</a></span><span class="op">(</span><span class="va">cb</span><span class="op">)</span></span>
<span></span>
<span><span class="va">lab_data</span></span>
<span><span class="co">#&gt;   formid $submission_id                  $created       freetext radio</span></span>
<span><span class="co">#&gt; 1 123823       27685292 2023-06-01T20:57:15+02:00      some text     1</span></span>
<span><span class="co">#&gt; 2 123823       27685302 2023-06-01T20:58:33+02:00 another answer    -1</span></span>
<span><span class="co">#&gt; 3 123823       27685319 2023-06-01T20:59:50+02:00                   -1</span></span>
<span><span class="co">#&gt;   checkbox.questionnaires checkbox.events checkbox.logs dropdown</span></span>
<span><span class="co">#&gt; 1                       1               1             0        4</span></span>
<span><span class="co">#&gt; 2                       0               0             1        9</span></span>
<span><span class="co">#&gt; 3                       1               1             1        4</span></span>
<span><span class="co">#&gt;   radio_matrix.grants radio_matrix.lecture radio_matrix.email</span></span>
<span><span class="co">#&gt; 1                   1                    2                  2</span></span>
<span><span class="co">#&gt; 2                   3                    3                  1</span></span>
<span><span class="co">#&gt; 3                   1                    1                  1</span></span>
<span><span class="co">#&gt;   checkbox_matrix.1.IT checkbox_matrix.1.colleague checkbox_matrix.1.admin</span></span>
<span><span class="co">#&gt; 1                    1                           1                       0</span></span>
<span><span class="co">#&gt; 2                    0                           0                       0</span></span>
<span><span class="co">#&gt; 3                    0                           1                       0</span></span>
<span><span class="co">#&gt;   checkbox_matrix.1.union checkbox_matrix.1.internet checkbox_matrix.2.IT</span></span>
<span><span class="co">#&gt; 1                       0                          0                    0</span></span>
<span><span class="co">#&gt; 2                       0                          1                    0</span></span>
<span><span class="co">#&gt; 3                       0                          1                    1</span></span>
<span><span class="co">#&gt;   checkbox_matrix.2.colleague checkbox_matrix.2.admin checkbox_matrix.2.union</span></span>
<span><span class="co">#&gt; 1                           0                       1                       0</span></span>
<span><span class="co">#&gt; 2                           0                       1                       1</span></span>
<span><span class="co">#&gt; 3                           1                       1                       1</span></span>
<span><span class="co">#&gt;   checkbox_matrix.2.internet       date  time         datetime number_decimal</span></span>
<span><span class="co">#&gt; 1                          0 2023-06-01 12:00 2023-06-12T13:33            4.5</span></span>
<span><span class="co">#&gt; 2                          0 2023-02-07 14:45 2024-02-15T08:55            2.2</span></span>
<span><span class="co">#&gt; 3                          0 2022-09-28 05:11 2022-03-03T07:29           10.0</span></span>
<span><span class="co">#&gt;   number_integer slider attachment_1 attachment_2 $answer_time_ms</span></span>
<span><span class="co">#&gt; 1           77.0      3    sølvi.png                        74630</span></span>
<span><span class="co">#&gt; 2           45.0      1               marius.jpeg           71313</span></span>
<span><span class="co">#&gt; 3           98.0      9                                     70230</span></span></code></pre></div>
<p>You will notice that this does on the surface look completely normal,
with no added extras. Inspecting the data with the <code>str</code>
function will however expose what lies beneath the surface.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">data</span><span class="op">)</span></span>
<span><span class="co">#&gt; 'data.frame':    3 obs. of  31 variables:</span></span>
<span><span class="co">#&gt;  $ formid                     : num  123823 123823 123823</span></span>
<span><span class="co">#&gt;  $ $submission_id             : int  27685292 27685302 27685319</span></span>
<span><span class="co">#&gt;  $ $created                   : chr  "2023-06-01T20:57:15+02:00" "2023-06-01T20:58:33+02:00" "2023-06-01T20:59:50+02:00"</span></span>
<span><span class="co">#&gt;  $ freetext                   : chr  "some text" "another answer" ""</span></span>
<span><span class="co">#&gt;  $ radio                      : int  1 -1 -1</span></span>
<span><span class="co">#&gt;  $ checkbox.questionnaires    : int  1 0 1</span></span>
<span><span class="co">#&gt;  $ checkbox.events            : int  1 0 1</span></span>
<span><span class="co">#&gt;  $ checkbox.logs              : int  0 1 1</span></span>
<span><span class="co">#&gt;  $ dropdown                   : int  4 9 4</span></span>
<span><span class="co">#&gt;  $ radio_matrix.grants        : int  1 3 1</span></span>
<span><span class="co">#&gt;  $ radio_matrix.lecture       : int  2 3 1</span></span>
<span><span class="co">#&gt;  $ radio_matrix.email         : int  2 1 1</span></span>
<span><span class="co">#&gt;  $ checkbox_matrix.1.IT       : int  1 0 0</span></span>
<span><span class="co">#&gt;  $ checkbox_matrix.1.colleague: int  1 0 1</span></span>
<span><span class="co">#&gt;  $ checkbox_matrix.1.admin    : int  0 0 0</span></span>
<span><span class="co">#&gt;  $ checkbox_matrix.1.union    : int  0 0 0</span></span>
<span><span class="co">#&gt;  $ checkbox_matrix.1.internet : int  0 1 1</span></span>
<span><span class="co">#&gt;  $ checkbox_matrix.2.IT       : int  0 0 1</span></span>
<span><span class="co">#&gt;  $ checkbox_matrix.2.colleague: int  0 0 1</span></span>
<span><span class="co">#&gt;  $ checkbox_matrix.2.admin    : int  1 1 1</span></span>
<span><span class="co">#&gt;  $ checkbox_matrix.2.union    : int  0 1 1</span></span>
<span><span class="co">#&gt;  $ checkbox_matrix.2.internet : int  0 0 0</span></span>
<span><span class="co">#&gt;  $ date                       : chr  "2023-06-01" "2023-02-07" "2022-09-28"</span></span>
<span><span class="co">#&gt;  $ time                       : chr  "12:00" "14:45" "05:11"</span></span>
<span><span class="co">#&gt;  $ datetime                   : chr  "2023-06-12T13:33" "2024-02-15T08:55" "2022-03-03T07:29"</span></span>
<span><span class="co">#&gt;  $ number_decimal             : chr  "4.5" "2.2" "10.0"</span></span>
<span><span class="co">#&gt;  $ number_integer             : chr  "77.0" "45.0" "98.0"</span></span>
<span><span class="co">#&gt;  $ slider                     : int  3 1 9</span></span>
<span><span class="co">#&gt;  $ attachment_1               : chr  "sølvi.png" "" ""</span></span>
<span><span class="co">#&gt;  $ attachment_2               : chr  "" "marius.jpeg" ""</span></span>
<span><span class="co">#&gt;  $ $answer_time_ms            : int  74630 71313 70230</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">lab_data</span><span class="op">)</span></span>
<span><span class="co">#&gt; Classes 'ns-data' and 'data.frame':  3 obs. of  31 variables:</span></span>
<span><span class="co">#&gt;  $ formid                     : num  123823 123823 123823</span></span>
<span><span class="co">#&gt;  $ $submission_id             : int  27685292 27685302 27685319</span></span>
<span><span class="co">#&gt;  $ $created                   : chr  "2023-06-01T20:57:15+02:00" "2023-06-01T20:58:33+02:00" "2023-06-01T20:59:50+02:00"</span></span>
<span><span class="co">#&gt;  $ freetext                   : 'character' chr  "some text" "another answer" ""</span></span>
<span><span class="co">#&gt;   ..- attr(*, "label")= chr "This is a question about something super important, where the user can input free text."</span></span>
<span><span class="co">#&gt;   ..- attr(*, "ns_type")= chr "QUESTION"</span></span>
<span><span class="co">#&gt;  $ radio                      : 'haven_labelled' int  1 -1 -1</span></span>
<span><span class="co">#&gt;   ..- attr(*, "labels")= Named int [1:2] 1 -1</span></span>
<span><span class="co">#&gt;   .. ..- attr(*, "names")= chr [1:2] "Very happy!" "Very unhappy!"</span></span>
<span><span class="co">#&gt;   ..- attr(*, "label")= chr "How happy are we with Nettskjema?"</span></span>
<span><span class="co">#&gt;   ..- attr(*, "ns_type")= chr "RADIO"</span></span>
<span><span class="co">#&gt;  $ checkbox.questionnaires    : 'haven_labelled' int  1 0 1</span></span>
<span><span class="co">#&gt;   ..- attr(*, "labels")= Named chr "questionnaires"</span></span>
<span><span class="co">#&gt;   .. ..- attr(*, "names")= chr "Questionnaires"</span></span>
<span><span class="co">#&gt;   ..- attr(*, "label")= chr "What do we use it for?:: Questionnaires"</span></span>
<span><span class="co">#&gt;   ..- attr(*, "ns_type")= chr "CHECKBOX"</span></span>
<span><span class="co">#&gt;  $ checkbox.events            : 'haven_labelled' int  1 0 1</span></span>
<span><span class="co">#&gt;   ..- attr(*, "labels")= Named chr "events"</span></span>
<span><span class="co">#&gt;   .. ..- attr(*, "names")= chr "Event sign-ups"</span></span>
<span><span class="co">#&gt;   ..- attr(*, "label")= chr "What do we use it for?:: Event sign-ups"</span></span>
<span><span class="co">#&gt;   ..- attr(*, "ns_type")= chr "CHECKBOX"</span></span>
<span><span class="co">#&gt;  $ checkbox.logs              : 'haven_labelled' int  0 1 1</span></span>
<span><span class="co">#&gt;   ..- attr(*, "labels")= Named chr "logs"</span></span>
<span><span class="co">#&gt;   .. ..- attr(*, "names")= chr "Data logging"</span></span>
<span><span class="co">#&gt;   ..- attr(*, "label")= chr "What do we use it for?:: Data logging"</span></span>
<span><span class="co">#&gt;   ..- attr(*, "ns_type")= chr "CHECKBOX"</span></span>
<span><span class="co">#&gt;  $ dropdown                   : 'haven_labelled' int  4 9 4</span></span>
<span><span class="co">#&gt;   ..- attr(*, "labels")= Named int [1:2] 4 9</span></span>
<span><span class="co">#&gt;   .. ..- attr(*, "names")= chr [1:2] "UiO" "OsloMet"</span></span>
<span><span class="co">#&gt;   ..- attr(*, "label")= chr "Who is responsible with Nettskjema?"</span></span>
<span><span class="co">#&gt;   ..- attr(*, "ns_type")= chr "SELECT"</span></span>
<span><span class="co">#&gt;  $ radio_matrix.grants        : 'haven_labelled' int  1 3 1</span></span>
<span><span class="co">#&gt;   ..- attr(*, "labels")= Named int [1:3] 1 2 3</span></span>
<span><span class="co">#&gt;   .. ..- attr(*, "names")= chr [1:3] "yes" "no" "not applicable"</span></span>
<span><span class="co">#&gt;   ..- attr(*, "label")= chr "In the last month I have: written some grant applications"</span></span>
<span><span class="co">#&gt;   ..- attr(*, "ns_type")= chr "MATRIX_RADIO"</span></span>
<span><span class="co">#&gt;  $ radio_matrix.lecture       : 'haven_labelled' int  2 3 1</span></span>
<span><span class="co">#&gt;   ..- attr(*, "labels")= Named int [1:3] 1 2 3</span></span>
<span><span class="co">#&gt;   .. ..- attr(*, "names")= chr [1:3] "yes" "no" "not applicable"</span></span>
<span><span class="co">#&gt;   ..- attr(*, "label")= chr "In the last month I have: held a lecture"</span></span>
<span><span class="co">#&gt;   ..- attr(*, "ns_type")= chr "MATRIX_RADIO"</span></span>
<span><span class="co">#&gt;  $ radio_matrix.email         : 'haven_labelled' int  2 1 1</span></span>
<span><span class="co">#&gt;   ..- attr(*, "labels")= Named int [1:3] 1 2 3</span></span>
<span><span class="co">#&gt;   .. ..- attr(*, "names")= chr [1:3] "yes" "no" "not applicable"</span></span>
<span><span class="co">#&gt;   ..- attr(*, "label")= chr "In the last month I have: sent some e-mails"</span></span>
<span><span class="co">#&gt;   ..- attr(*, "ns_type")= chr "MATRIX_RADIO"</span></span>
<span><span class="co">#&gt;  $ checkbox_matrix.1.IT       : 'haven_labelled' int  1 0 0</span></span>
<span><span class="co">#&gt;   ..- attr(*, "labels")= Named chr "IT"</span></span>
<span><span class="co">#&gt;   .. ..- attr(*, "names")= chr "IT"</span></span>
<span><span class="co">#&gt;   ..- attr(*, "label")= chr "In the last year, I have :: sought help from :: IT"</span></span>
<span><span class="co">#&gt;   ..- attr(*, "ns_type")= chr "MATRIX_CHECKBOX"</span></span>
<span><span class="co">#&gt;  $ checkbox_matrix.1.colleague: 'haven_labelled' int  1 0 1</span></span>
<span><span class="co">#&gt;   ..- attr(*, "labels")= Named chr "colleague"</span></span>
<span><span class="co">#&gt;   .. ..- attr(*, "names")= chr "A colleague"</span></span>
<span><span class="co">#&gt;   ..- attr(*, "label")= chr "In the last year, I have :: sought help from :: A colleague"</span></span>
<span><span class="co">#&gt;   ..- attr(*, "ns_type")= chr "MATRIX_CHECKBOX"</span></span>
<span><span class="co">#&gt;  $ checkbox_matrix.1.admin    : 'haven_labelled' int  0 0 0</span></span>
<span><span class="co">#&gt;   ..- attr(*, "labels")= Named chr "admin"</span></span>
<span><span class="co">#&gt;   .. ..- attr(*, "names")= chr "Administration"</span></span>
<span><span class="co">#&gt;   ..- attr(*, "label")= chr "In the last year, I have :: sought help from :: Administration"</span></span>
<span><span class="co">#&gt;   ..- attr(*, "ns_type")= chr "MATRIX_CHECKBOX"</span></span>
<span><span class="co">#&gt;  $ checkbox_matrix.1.union    : 'haven_labelled' int  0 0 0</span></span>
<span><span class="co">#&gt;   ..- attr(*, "labels")= Named chr "union"</span></span>
<span><span class="co">#&gt;   .. ..- attr(*, "names")= chr "Union"</span></span>
<span><span class="co">#&gt;   ..- attr(*, "label")= chr "In the last year, I have :: sought help from :: Union"</span></span>
<span><span class="co">#&gt;   ..- attr(*, "ns_type")= chr "MATRIX_CHECKBOX"</span></span>
<span><span class="co">#&gt;  $ checkbox_matrix.1.internet : 'haven_labelled' int  0 1 1</span></span>
<span><span class="co">#&gt;   ..- attr(*, "labels")= Named chr "internet"</span></span>
<span><span class="co">#&gt;   .. ..- attr(*, "names")= chr "Internet"</span></span>
<span><span class="co">#&gt;   ..- attr(*, "label")= chr "In the last year, I have :: sought help from :: Internet"</span></span>
<span><span class="co">#&gt;   ..- attr(*, "ns_type")= chr "MATRIX_CHECKBOX"</span></span>
<span><span class="co">#&gt;  $ checkbox_matrix.2.IT       : 'haven_labelled' int  0 0 1</span></span>
<span><span class="co">#&gt;   ..- attr(*, "labels")= Named chr "IT"</span></span>
<span><span class="co">#&gt;   .. ..- attr(*, "names")= chr "IT"</span></span>
<span><span class="co">#&gt;   ..- attr(*, "label")= chr "In the last year, I have :: received e-mails from :: IT"</span></span>
<span><span class="co">#&gt;   ..- attr(*, "ns_type")= chr "MATRIX_CHECKBOX"</span></span>
<span><span class="co">#&gt;  $ checkbox_matrix.2.colleague: 'haven_labelled' int  0 0 1</span></span>
<span><span class="co">#&gt;   ..- attr(*, "labels")= Named chr "colleague"</span></span>
<span><span class="co">#&gt;   .. ..- attr(*, "names")= chr "A colleague"</span></span>
<span><span class="co">#&gt;   ..- attr(*, "label")= chr "In the last year, I have :: received e-mails from :: A colleague"</span></span>
<span><span class="co">#&gt;   ..- attr(*, "ns_type")= chr "MATRIX_CHECKBOX"</span></span>
<span><span class="co">#&gt;  $ checkbox_matrix.2.admin    : 'haven_labelled' int  1 1 1</span></span>
<span><span class="co">#&gt;   ..- attr(*, "labels")= Named chr "admin"</span></span>
<span><span class="co">#&gt;   .. ..- attr(*, "names")= chr "Administration"</span></span>
<span><span class="co">#&gt;   ..- attr(*, "label")= chr "In the last year, I have :: received e-mails from :: Administration"</span></span>
<span><span class="co">#&gt;   ..- attr(*, "ns_type")= chr "MATRIX_CHECKBOX"</span></span>
<span><span class="co">#&gt;  $ checkbox_matrix.2.union    : 'haven_labelled' int  0 1 1</span></span>
<span><span class="co">#&gt;   ..- attr(*, "labels")= Named chr "union"</span></span>
<span><span class="co">#&gt;   .. ..- attr(*, "names")= chr "Union"</span></span>
<span><span class="co">#&gt;   ..- attr(*, "label")= chr "In the last year, I have :: received e-mails from :: Union"</span></span>
<span><span class="co">#&gt;   ..- attr(*, "ns_type")= chr "MATRIX_CHECKBOX"</span></span>
<span><span class="co">#&gt;  $ checkbox_matrix.2.internet : 'haven_labelled' int  0 0 0</span></span>
<span><span class="co">#&gt;   ..- attr(*, "labels")= Named chr "internet"</span></span>
<span><span class="co">#&gt;   .. ..- attr(*, "names")= chr "Internet"</span></span>
<span><span class="co">#&gt;   ..- attr(*, "label")= chr "In the last year, I have :: received e-mails from :: Internet"</span></span>
<span><span class="co">#&gt;   ..- attr(*, "ns_type")= chr "MATRIX_CHECKBOX"</span></span>
<span><span class="co">#&gt;  $ date                       : 'character' chr  "2023-06-01" "2023-02-07" "2022-09-28"</span></span>
<span><span class="co">#&gt;   ..- attr(*, "label")= chr "Choose a random date"</span></span>
<span><span class="co">#&gt;   ..- attr(*, "ns_type")= chr "DATE"</span></span>
<span><span class="co">#&gt;  $ time                       : 'character' chr  "12:00" "14:45" "05:11"</span></span>
<span><span class="co">#&gt;   ..- attr(*, "label")= chr "now choose a random time!"</span></span>
<span><span class="co">#&gt;   ..- attr(*, "ns_type")= chr "DATE"</span></span>
<span><span class="co">#&gt;  $ datetime                   : 'character' chr  "2023-06-12T13:33" "2024-02-15T08:55" "2022-03-03T07:29"</span></span>
<span><span class="co">#&gt;   ..- attr(*, "label")= chr "Lastly choose a date AND time!"</span></span>
<span><span class="co">#&gt;   ..- attr(*, "ns_type")= chr "DATE"</span></span>
<span><span class="co">#&gt;  $ number_decimal             : 'numeric' chr  "4.5" "2.2" "10.0"</span></span>
<span><span class="co">#&gt;   ..- attr(*, "label")= chr "Pick a number between 0 and 10!"</span></span>
<span><span class="co">#&gt;   ..- attr(*, "ns_type")= chr "NUMBER"</span></span>
<span><span class="co">#&gt;  $ number_integer             : 'numeric' chr  "77.0" "45.0" "98.0"</span></span>
<span><span class="co">#&gt;   ..- attr(*, "label")= chr "Choose an integer between 0 and 100"</span></span>
<span><span class="co">#&gt;   ..- attr(*, "ns_type")= chr "NUMBER"</span></span>
<span><span class="co">#&gt;  $ slider                     : int  3 1 9</span></span>
<span><span class="co">#&gt;   ..- attr(*, "label")= chr "Choose a point on the slider!"</span></span>
<span><span class="co">#&gt;   ..- attr(*, "ns_type")= chr "LINEAR_SCALE"</span></span>
<span><span class="co">#&gt;  $ attachment_1               : 'character' chr  "sølvi.png" "" ""</span></span>
<span><span class="co">#&gt;   ..- attr(*, "label")= chr "Upload a fun image!"</span></span>
<span><span class="co">#&gt;   ..- attr(*, "ns_type")= chr "ATTACHMENT"</span></span>
<span><span class="co">#&gt;  $ attachment_2               : 'character' chr  "" "marius.jpeg" ""</span></span>
<span><span class="co">#&gt;   ..- attr(*, "label")= chr "This is an attachment2"</span></span>
<span><span class="co">#&gt;   ..- attr(*, "ns_type")= chr "ATTACHMENT"</span></span>
<span><span class="co">#&gt;  $ $answer_time_ms            : int  74630 71313 70230</span></span></code></pre></div>
<p>You can see there are lots of label attributes attached to
<code>lab_data</code> that are not there in the <code>data</code>
object. These labels are attached from the codebook, and provide
important context to what the data source actually is. These hidden
features of the data are unlocked when working with functions from the
{haven} package.</p>
<p>Notice how the metadata (variable and value labels) are now embedded
in the dataset.</p>
</div>
<div class="section level2">
<h2 id="exploring-labelled-data-with-haven">Exploring Labelled Data with <code>{haven}</code><a class="anchor" aria-label="anchor" href="#exploring-labelled-data-with-haven"></a>
</h2>
<p>Once your data has been labelled, the <a href="https://haven.tidyverse.org" class="external-link">haven</a> package
provides functionalities to inspect and manipulate labels with ease.</p>
<div class="section level3">
<h3 id="inspecting-labels">Inspecting Labels<a class="anchor" aria-label="anchor" href="#inspecting-labels"></a>
</h3>
<p>Use <code><a href="https://larmarange.github.io/labelled/reference/var_label.html" class="external-link">var_label()</a></code> to extract variable-level labels and
<code><a href="https://larmarange.github.io/labelled/reference/val_labels.html" class="external-link">val_labels()</a></code> to extract value-level labels:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://larmarange.github.io/labelled/" class="external-link">labelled</a></span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Variable labels</span></span>
<span><span class="fu"><a href="https://larmarange.github.io/labelled/reference/var_label.html" class="external-link">var_label</a></span><span class="op">(</span><span class="va">lab_data</span><span class="op">$</span><span class="va">freetext</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "This is a question about something super important, where the user can input free text."</span></span></code></pre></div>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Value labels for 'radio'</span></span>
<span><span class="fu"><a href="https://larmarange.github.io/labelled/reference/val_labels.html" class="external-link">val_labels</a></span><span class="op">(</span><span class="va">lab_data</span><span class="op">$</span><span class="va">radio</span><span class="op">)</span></span>
<span><span class="co">#&gt;   Very happy! Very unhappy! </span></span>
<span><span class="co">#&gt;             1            -1</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="modifying-labels">Modifying Labels<a class="anchor" aria-label="anchor" href="#modifying-labels"></a>
</h3>
<p>If you need to modify labels, we suggest you do this directly in the
Nettskjema codebook setup. However, if you are working on a form that is
no longer available in Nettskjema, and you have downloaded and saved
both the data and the codebook (or the labelled data), labels can be
modified using <a href="https://haven.tidyverse.org" class="external-link">haven</a>:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">lab_data</span><span class="op">$</span><span class="va">freetex</span></span>
<span><span class="co">#&gt; [1] "some text"      "another answer" ""              </span></span>
<span><span class="co">#&gt; attr(,"label")</span></span>
<span><span class="co">#&gt; [1] "This is a question about something super important, where the user can input free text."</span></span>
<span><span class="co">#&gt; attr(,"ns_type")</span></span>
<span><span class="co">#&gt; [1] "QUESTION"</span></span>
<span><span class="co">#&gt; attr(,"class")</span></span>
<span><span class="co">#&gt; [1] "character"</span></span>
<span><span class="co"># Update variable-level label for 'freetext'</span></span>
<span><span class="fu"><a href="https://larmarange.github.io/labelled/reference/var_label.html" class="external-link">var_label</a></span><span class="op">(</span><span class="va">lab_data</span><span class="op">$</span><span class="va">freetext</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="st">"Important freetext comment"</span></span>
<span></span>
<span><span class="va">lab_data</span><span class="op">$</span><span class="va">radio</span></span>
<span><span class="co">#&gt; &lt;labelled&lt;integer&gt;[3]&gt;: How happy are we with Nettskjema?</span></span>
<span><span class="co">#&gt; [1]  1 -1 -1</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Labels:</span></span>
<span><span class="co">#&gt;  value         label</span></span>
<span><span class="co">#&gt;      1   Very happy!</span></span>
<span><span class="co">#&gt;     -1 Very unhappy!</span></span>
<span><span class="co"># Update value labels for 'radio'</span></span>
<span><span class="fu"><a href="https://larmarange.github.io/labelled/reference/val_labels.html" class="external-link">val_labels</a></span><span class="op">(</span><span class="va">lab_data</span><span class="op">$</span><span class="va">radio</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>Unhappy <span class="op">=</span> <span class="op">-</span><span class="fl">1</span>, Happy <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Check updated labels</span></span>
<span><span class="fu"><a href="https://larmarange.github.io/labelled/reference/var_label.html" class="external-link">var_label</a></span><span class="op">(</span><span class="va">lab_data</span><span class="op">$</span><span class="va">freetext</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "Important freetext comment"</span></span>
<span><span class="fu"><a href="https://larmarange.github.io/labelled/reference/val_labels.html" class="external-link">val_labels</a></span><span class="op">(</span><span class="va">lab_data</span><span class="op">$</span><span class="va">radio</span><span class="op">)</span></span>
<span><span class="co">#&gt; Unhappy   Happy </span></span>
<span><span class="co">#&gt;      -1       1</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="benefits-of-using-labelled-data">Benefits of Using Labelled Data<a class="anchor" aria-label="anchor" href="#benefits-of-using-labelled-data"></a>
</h2>
<p>Some key benefits include the following: 1. <strong>Enhanced
Documentation</strong>: Embedding metadata directly in the dataset
improves clarity. 2. <strong>Consistency</strong>: Reduces ambiguity
when working across different teams or systems. 3.
<strong>Compatibility</strong>: Facilitates interoperability with SPSS,
Stata, and other statistical software.</p>
<p>For more information, check out the <a href="https://larmarange.github.io/labelled/" class="external-link">labelled package
documentation</a>.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Athanasia Mo Mowinckel.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer>
</div>





  </body>
</html>
