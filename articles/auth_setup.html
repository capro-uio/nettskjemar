<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Setting up Nettskjema API authentication • nettskjemar</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Setting up Nettskjema API authentication">
<meta property="og:description" content="nettskjemar">
<meta property="og:image" content="/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">nettskjemar</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.4.008</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/nettskjemar.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/auth_setup.html">Setting up Nettskjema API authentication</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/LCBC-UiO/nettskjemar/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="auth_setup_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Setting up Nettskjema API authentication</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/LCBC-UiO/nettskjemar/blob/master/vignettes/auth_setup.Rmd"><code>vignettes/auth_setup.Rmd</code></a></small>
      <div class="hidden name"><code>auth_setup.Rmd</code></div>

    </div>

    
    
<p>To set up a connection to the Nettskjema API, you need to create an api-user, and a token associated with this user. The nettskjema api-user is different from your standard user that has access to nettskjema. This is a specific user that may access nettskjema through the API.</p>
<p>Use the <code>nettskjema_user_create</code> function to be routed to the portal to set this up.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/LCBC-UiO/nettskjemar">nettskjemar</a></span><span class="op">)</span></code></pre></div>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/nettskjema_user_create.html">nettskjema_user_create</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<p>Create an api user, I recommend using your uio user name or an UiO user group. <img src="static/nettskjema_api_create.png" style="width:100.0%" alt="Create an API user"></p>
<p>Click on the created username to access the token generation. <img src="static/nettskjema_api_create2.png" style="width:100.0%" alt="Click on the created API user name to access the token generation"></p>
<p>Select which permissions the token should be allowed to have, and save to create the token. Make sure that the IP addresses you want the token to be used from is in the list of ips at the bottom. If you don’t know your current IP address, <a href="https://www.google.com/search?q=whats+my+ip&amp;rlz=1C5CHFA_enNO891NO891&amp;oq=whats+my+ip&amp;aqs=chrome..69i57.1587j0j7&amp;sourceid=chrome&amp;ie=UTF-8">google “what’s my ip”</a> <img src="static/nettskjema_create_token.png" style="width:100.0%" alt="Select the permissions the token should allow you to have"></p>
<p>Copy the token and return to RStudio (this example token has been deleted). <img src="static/nettskjema_create_token2.png" style="width:100.0%" alt="Copy the token and return to RStudio. FYI: This token has since been deleted."></p>
<p>In R, you can now add this token to your <code>.Renviron</code> file.</p>
<p>You can do this in one of two ways, either open the file with <code><a href="../reference/nettskjema_renviron_edit.html">nettskjema_renviron_edit()</a></code>,</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1"></a><span class="va">NETTSKJEMA_API_TOKEN=</span>paste_token_here</span></code></pre></div>
<p>or add it directly with:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/nettskjema_token2renviron.html">nettskjema_token2renviron</a></span><span class="op">(</span><span class="st">"paste_token_here"</span><span class="op">)</span></code></pre></div>
<p>This will add the token to the environment variable <code>NETTSKJEMA_API_TOKEN</code>. If you want to give the token another name, or you have several tokens and need to store them separately, you can do so:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/nettskjema_token2renviron.html">nettskjema_token2renviron</a></span><span class="op">(</span><span class="st">"paste_token_here"</span>,
                          token_name <span class="op">=</span> <span class="st">"ANOTHER_NAME"</span><span class="op">)</span></code></pre></div>
<p>This function will add the token so you can authenticate your self to nettskjema, and also make sure the <code>.Renviron</code> file is locked so no other user of your computer may access it. For it to take effect, you need your R session to restart. You may do so in RStudio by going to <code>Session</code> -&gt; <code>Restart R session</code>, and by pressing <code>cmd/ctrl + shift + F10</code> on the keyboard.</p>
<p><strong>OBS!</strong> This token is important to keep safe. If you believe the token has been compromised in any way, delete it in the API user-portal and create a new one.</p>
<div id="check-token-expiry-date" class="section level2">
<h2 class="hasAnchor">
<a href="#check-token-expiry-date" class="anchor"></a>Check token expiry date</h2>
<p>The token is valid for 1 year. You can check the remaining time left a token is valid by</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/nettskjema_token_expiry.html">nettskjema_token_expiry</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<pre><code>Token with name 'NETTSKJEMA_API_TOKEN' expires in 292 days.
[1] "2022-02-26"</code></pre>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Athanasia Mo Mowinckel.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
